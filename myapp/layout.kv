##########################################################################
# ========================= CLASS DEFINITION =========================== #
##########################################################################

<Content>
    MDTextField:
        id: ip_text_field
        pos_hint: {'center_x': .5, 'center_y': .5}

<MDIconButton>
    icon: "alien"
    style: "tonal"
    theme_bg_color: "Custom"
    size_hint: None, None

<MenuHeader>
    spacing: "12dp"
    padding: "4dp"
    adaptive_height: True

    MDIconButton:
        icon: "gesture-tap-button"
        pos_hint: {"center_y": .5}

    MDLabel:
        text: "Actions"
        adaptive_size: True
        pos_hint: {"center_y": .5}

<MenuWin>
    spacing: "12dp"
    padding: "8dp"
#    adaptive_height: True
    adaptive_size: True

    MDIconButton:
        icon: "whistle"
        pos_hint: {"center_y": .5}

    MDLabel:
        id: menu_header_2
        markup: True
        text: "[color=#00ff00][b]You Win![/color][/b]"
        theme_font_size: "Custom"
        font_size: "24sp"
        adaptive_size: True
        pos_hint: {"center_y": .5}

<MenuLose>
    spacing: "12dp"
    padding: "8dp"
#    adaptive_height: True
    adaptive_size: True

    MDIconButton:
        icon: "whistle"
        pos_hint: {"center_y": .5}

    MDLabel:
        id: menu_header_2
        markup: True
        text: "[color=#ff0000][b]You Lose![/color][/b]"
        theme_font_size: "Custom"
        font_size: "24sp"
        adaptive_size: True
        pos_hint: {"center_y": .5}


##########################################################################
# =========================== SCREEM MANAGER =========================== #
##########################################################################

MDScreenManager:

    ##########################################################################
    # =========================== SCREEN A ================================= #
    ##########################################################################

    MDScreen:
        name: "screen A"
        size_hint: 1, 1
        # md_bg_color: [1,1,1,1]
        on_enter: app.on_home_screen()

        MDFloatLayout:
            adaptive_height: True
            size: root.size

            # ============= TOP BAR =============
            MDLabel:
                text: "Tap Race"
                font_style: "Display"
                font_style: "nasalization"
                adaptive_height: True
                adaptive_width: True
                pos_hint: {"center_x": .5, "top": .95}

            # ============= IP LABEL =============
            MDLabel:
                id: ip_label
                text: ""
                font_style: "Title"
                adaptive_width: True
                pos_hint: {"center_x": .5, "center_y": .75}

            # ============= SERVER BUTTON =============
            MDButton:
                pos_hint: {"center_x": .3, "center_y": .6}
                on_release: app.start_server()

                MDButtonText:
                    text: "Server"

            # ============= CLIENT BUTTON =============
            MDButton:
                pos_hint: {"center_x": .7, "center_y": .6}
                on_release: app.start_client()

                MDButtonText:
                    text: "Client"

            # ============= NICKNAME LABEL =============
            MDLabel:
                id: nickname_label
                markup: True
                text: ""
                font_style: "Headline"
                adaptive_width: True
                pos_hint: {"center_x": .5, "center_y": .45}

            # ============= START BUTTON =============
            MDButton:
                pos_hint: {"center_x": .5, "center_y": .3}
                on_release: app.on_start_btn()

                MDButtonText:
                    text: "Start"

            # ============= EXIT BUTTON =============
            MDButton:
                pos_hint: {"center_x": .5, "center_y": .2}
                on_release: app.on_exit()

                MDButtonText:
                    text: "Exit"

    ##########################################################################
    # ============================ SCREEN B ================================ #
    ##########################################################################

    MDScreen:
        name: "screen B"
        md_bg_color: "#6fb856"

        MDBoxLayout:
            orientation: "vertical"
            size_hint: None, None
            size: root.width, root.height
            # padding: 0, "19dp", 0, 0

            # ========== MDTopAppBar ==========
            MDTopAppBar:

                MDTopAppBarTitle:
                    text: "Tap Race"
                    theme_font_size: "Custom"
                    font_size: "48sp"
                    font_style: "nasalization"
                    #pos_hint: {"center_x": .5}

                MDTopAppBarTrailingButtonContainer:

                    MDActionTopAppBarButton:
                        id: menu_btn
                        icon: "dots-vertical"
                        on_release: app.top_menu.open()

            # ========== Progress bars ==========
            MDGridLayout:
                id: prog_bar_grid
                md_bg_color: "#4e7a4f"
                cols: 1
                padding: "8dp"
                spacing: "8dp"


            # ========== Counter ==========
            MDBoxLayout:
                md_bg_color: "#4e607a"
                orientation: "vertical"
                adaptive_height: True
                size_hint_y: None
                height: "100dp"

                MDLabel:
                    id: count_label
                    text: "0"
                    font_style: "Display"
                    adaptive_size: True
                    pos_hint: {"center_x": .5, "center_y": .5}


            # ========== Buttons ==========
            MDFloatLayout:
                md_bg_color: "#6a4e7a"
                orientation: "vertical"
                adaptive_height: True
                size_hint_y: None
                height: "250dp"

                MDIconButton:
                    id: btn1
                    md_bg_color: [1,0,0,.2]
                    size: "64dp", "64dp"
                    pos_hint: {"center_x": .5, "center_y": .75}
                    ripple_effect: False
                    on_release: app.on_press(1)

                MDIconButton:
                    id: btn2
                    md_bg_color: [0,1,0,.2]
                    size: "64dp", "64dp"
                    pos_hint: {"center_x": .3, "center_y": .5}
                    ripple_effect: False
                    on_release: app.on_press(2)

                MDIconButton:
                    id: btn3
                    md_bg_color: [0,0,1,.2]
                    size: "64dp", "64dp"
                    pos_hint: {"center_x": .7, "center_y": .5}
                    ripple_effect: False
                    on_release: app.on_press(3)

                MDIconButton:
                    id: btn4
                    md_bg_color: [1,1,0,.2]
                    size: "64dp", "64dp"
                    pos_hint: {"center_x": .5, "center_y": .25}
                    ripple_effect: False
                    on_release: app.on_press(4)